import{d as w,Q as p,q as C,_ as m,o as l,c as h,a as o,t as g,n as f,F as v,r as y,p as A,b as S,e as W}from"./index-b5ad10eb.js";const I=w({props:["propdata"],name:"QrCreator",data(){return{devices:this.propdata,length:16,count:Array(),currentUnit:0,currentPlayer:0,outputElem:document.getElementById("output"),redraw:0,qr:document.createElement("canvas"),unitArray:["I","C","A","W",""],playerArray:["1","2","3","4"],item_style:this.getWidthStyle((window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.022)}},methods:{drawCanvas(t,e,r,n,a,d){if(e<=0||r<0)throw new RangeError("Value out of range");const i=(t.size+r*2)*e;d.width=i,d.height=i;let s=d.getContext("2d");for(let u=-r;u<t.size+r;u++)for(let c=-r;c<t.size+r;c++)s.fillStyle=t.getModule(c,u)?a:n,s.fillRect((c+r)*e,(u+r)*e,e,e)},appendCanvas(t){return this.qr&&this.qr.remove(),this.qr=document.createElement("canvas"),this.outputElem.appendChild(this.qr),this.qr},getPlayer(t){return t[1]=="1"?0:t[1]=="2"?1:t[1]=="3"?2:t[1]=="4"?3:0},getByte(t){var e=32;return t==""||(t[0]=="W"&&(e+=1),t[0]=="A"&&(e+=2,e+=this.getPlayer(t)),t[0]=="C"&&(e+=6,e+=this.getPlayer(t)),t[0]=="I"&&(e+=10,e+=this.getPlayer(t))),e},getByteArray(){for(var t="",e=0;e<4;e++)t+=""+e;for(var r=0;r<this.length;r++)for(var n=0;n<this.length;n++)t+=String.fromCharCode(this.getByte(this.getItem(r,n)));for(var a="",r=0;r<this.length;r++){a+=`
`;for(var n=0;n<this.length;n++)a+=t[r+n*this.length]}return console.log(a),t},generateQr(){const t=p.Ecc.LOW,e=p.encodeText(this.getByteArray(),t);this.drawCanvas(e,10,4,"#FFFFFF","#000000",this.appendCanvas("hello-world-QR"))},getItem(t,e){return this.count.length>0?this.count[t][e]:""},change(t,e){var r=this.getCurrentUnit();r==this.count[t][e]?this.count[t][e]="":this.count[t][e]=r,console.log("hit",t,e);for(var n=0;n<this.length;n++)console.log("Out",this.count[t][e]);this.generateQr()},getCurrentUnit(){return this.unitArray[this.currentUnit]=="W"?"W":this.unitArray[this.currentUnit]==""?"":this.unitArray[this.currentUnit]+this.playerArray[this.currentPlayer]},changeSelectorUnit(){this.currentUnit=(this.currentUnit+1)%this.unitArray.length},changePlayer(){this.currentPlayer=(this.currentPlayer+1)%this.playerArray.length},getWidthStyle(t){console.log(window.innerWidth);var e="min-width: "+t+"px;min-height: "+t+"px;margin: "+t/10+"px;font-size: "+t*2/4+"px;";return e},updateRelativeSize(t){this.redraw+=1;var e=Math.floor((window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.65*(1/this.length));e<20&&(e=20),this.item_style=this.getWidthStyle(e)},getColor(t){var e="",r;return t?t=="W"?r=[255,255,255]:t==""?r=[0,0,0]:t.length<2?r=[0,0,0]:t[1]=="1"?r=[0,0,255]:t[1]=="2"?r=[255,0,0]:t[1]=="3"?r=[0,255,0]:r=[255,0,255]:r=[0,0,0],e+="color: rgba("+(255-r[0])+","+(255-r[1])+","+(255-r[2])+");",e+="background-color: rgba("+r[0]+","+r[1]+","+r[2]+");",e}},mounted(){window.addEventListener("resize",this.updateRelativeSize),console.log(`Wat is up
`),console.log(C);for(var t=0;t<this.length;t++){this.count[t]=new Array;for(var e=0;e<this.length;e++)this.count[t].push("")}this.outputElem=document.getElementById("output"),this.generateQr(),this.updateRelativeSize(null)}});const _=t=>(A("data-v-191bf780"),t=t(),S(),t),U={class:"top"},q={class:"selector"},B=_(()=>o("div",{class:"selector-div"},[o("div",{class:"selector-label"},"Selector:")],-1)),E={class:"qr-grid"},P=["onClick"],k=_(()=>o("div",{id:"output"},null,-1));function Q(t,e,r,n,a,d){return l(),h("div",U,[o("div",q,[B,o("div",{style:{"min-width":"50px"},class:"qr-item",onClick:e[0]||(e[0]=i=>t.changeSelectorUnit())},g(t.unitArray[t.currentUnit]),1),o("div",{style:f("min-width: 50px;"+t.getColor(t.getCurrentUnit())),class:"qr-item",onClick:e[1]||(e[1]=i=>t.changePlayer())},g(t.playerArray[t.currentPlayer]),5)]),o("div",E,[(l(!0),h(v,null,y(t.length,i=>(l(),h("div",{key:i,class:"qr-row"},[(l(!0),h(v,null,y(t.length,s=>(l(),h("div",{key:s+t.redraw,class:"qr-item",onClick:u=>t.change(i-1,s-1),style:f(t.getColor(t.getItem(i-1,s-1))+t.item_style)},g(t.getItem(i-1,s-1)),13,P))),128))]))),128))]),k])}const $=m(I,[["render",Q],["__scopeId","data-v-191bf780"]]),F={class:"about"},R=w({__name:"Bargen",setup(t){return(e,r)=>(l(),h("div",F,[W($)]))}});export{R as default};
